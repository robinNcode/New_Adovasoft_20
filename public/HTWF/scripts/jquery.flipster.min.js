/* 
 * jquery.flipster
 * built 2015-03-06 
*/

"use strict";
!function (e) { e.fn.flipster = function (t) { var i, n, l = "string" == typeof t; if (l) i = t, n = Array.prototype.slice.call(arguments, 1); else var a = { itemContainer: "ul", itemSelector: "li", style: "coverflow", start: "center", enableKeyboard: !0, enableMousewheel: !0, enableTouch: !0, onItemSwitch: e.noop, disableRotation: !1, enableNav: !1, navPosition: "before", enableNavButtons: !1, prevText: "Previous", nextText: "Next" }, s = e.extend({}, a, t), r = e(window); return this.each(function () { function t() { k = 0 } function a() { g.height(f()), v.css("height", "auto"), "carousel" === s.style && g.width(m.width()) } function f() { var t = 0; return m.each(function () { e(this).height() > t && (t = e(this).height()) }), t } function o() { var t, i, n; if (s.enableNav && m.length > 1) { var l = [], a = [], r = []; m.each(function () { var t, i = e(this).data("flip-category"), n = e(this).attr("id"), s = e(this).attr("title"); void 0 !== i && e.inArray(i, l) < 0 && (l.push(i), r[i] = '<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="' + i + '">' + i + '</a>\n<ul class="flip-nav-items">\n'), e.inArray(n, a) < 0 && (a.push(n), t = '<a href="#' + n + '" class="flip-nav-item-link">' + s + "</a></li>\n", void 0 !== i ? r[i] = r[i] + '<li class="flip-nav-item">' + t : r[n] = '<li class="flip-nav-item no-category">' + t) }), t = '<ul class="flipster-nav">\n'; for (i in l) r[l[i]] = r[l[i]] + "</ul>\n</li>\n"; for (n in r) t += r[n]; t += "</ul>", y = "after" != s.navPosition.toLowerCase() ? e(t).prependTo(v) : e(t).appendTo(v), C = y.find("a").on("click", function (t) { var i; (i = e(this).hasClass("flip-nav-category-link") ? m.filter("[data-flip-category='" + e(this).data("flip-category") + "']") : e(this.hash)).length && (h(i), t.preventDefault()) }) } } function p() { if (s.enableNav && m.length > 1) { var t = e(m[w]); y.find(".flip-nav-current").removeClass("flip-nav-current"), C.filter("[href='#" + t.attr("id") + "']").addClass("flip-nav-current"), C.filter("[data-flip-category='" + t.data("flip-category") + "']").parent().addClass("flip-nav-current") } } function c() { s.enableNavButtons && m.length > 1 && (v.find(".flipto-prev, .flipto-next").remove(), v.append("<a href='#' class='flipto-prev'>" + s.prevText + "</a> <a href='#' class='flipto-next'>" + s.nextText + "</a>"), v.children(".flipto-prev").on("click", function (e) { h("left"), e.preventDefault() }), v.children(".flipto-next").on("click", function (e) { h("right"), e.preventDefault() })) } function d() { var t, i, n, l, r, f, o = e(m[w]).addClass("flip-current"); if (m.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition"), "carousel" === s.style) { m.addClass("flip-hidden"); var c = e(m[w + 1]), d = e(m[w + 2]), h = e(m[w - 1]), u = e(m[w - 2]); 0 === w ? (h = m.last(), u = h.prev()) : 1 === w ? u = m.last() : w === m.length - 2 ? d = m.first() : w === m.length - 1 && (c = m.first(), d = e(m[1])), d.removeClass("flip-hidden").addClass("flip-future"), u.removeClass("flip-hidden").addClass("flip-past"), c.removeClass("flip-hidden").addClass("flip-next"), h.removeClass("flip-hidden").addClass("flip-prev") } else { var v = o.outerWidth() / 2, y = 0, C = g.width(), x = o.outerWidth(), T = m.index(o) * x / 2 + v / 2; for (m.removeClass("flip-hidden"), t = 0; t < m.length; t++) i = e(m[t]), n = i.outerWidth(), w > t ? i.addClass("flip-past").css({ "z-index": t, left: t * n / 2 + 50 + "px" }) : t > w && i.addClass("flip-future").css({ "z-index": m.length - t, left: t * n / 2 - 50 + v + "px" }); if (o.css({ "z-index": m.length + 1, left: T + "px" }), y = T + x / 2 - C / 2, l = -1 * y + "px", b) { for (r = e(".flip-past"), f = e(".flip-future"), e(".flip-current").css("zoom", "1.0"), t = 0; t < r.length; t++) e(r[t]).css("zoom", 100 - 5 * (r.length - t) + "%"); for (t = 0; t < f.length; t++) e(f[t]).css("zoom", 100 - 5 * (t + 1) + "%"); g.animate({ left: l }, 333) } else g.css("left", l) } o.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden"), a(), p(), s.onItemSwitch.call(this) } function h(e) { m.length > 1 && ("left" === e ? w > 0 ? w-- : w = m.length - 1 : "right" === e ? w < m.length - 1 ? w++ : w = 0 : w = "number" == typeof e ? e : m.index(e), d()) } var u, v = e(this); if (l) return (u = v.data("methods"))[i].apply(this, n); var g, m, y, C, x, b, w = 0, T = 0, k = 0; u = { jump: h }, v.data("methods", u), v.hasClass("flipster-active") || function () { var i; v.addClass("flipster flipster-active flipster-" + s.style).css("visibility", "hidden"), s.disableRotation && v.addClass("no-rotate"), g = v.find(s.itemContainer).addClass("flip-items"), m = g.find(s.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />"), (i = document.createElement("b")).innerHTML = "\x3c!--[if IE 9]><i></i><![endif]--\x3e", 1 === i.getElementsByTagName("i").length && (b = !0, g.addClass("compatibility")), o(), c(), s.start && m.length > 1 && (w = "center" === s.start ? !m.length % 2 ? m.length / 2 + 1 : Math.floor(m.length / 2) : s.start), a(), v.hide().css("visibility", "visible").fadeIn(400, function () { d() }), r.on("resize.flipster", function () { a(), d() }), m.on("click", function (t) { e(this).hasClass("flip-current") || t.preventDefault(), h(m.index(this)) }), s.enableKeyboard && m.length > 1 && (r.on("keydown.flipster", function (e) { if (++k % 7 == 0 || 1 === k) { var t = e.which; 37 === t ? (e.preventDefault(), h("left")) : 39 === t && (e.preventDefault(), h("right")) } }), r.on("keyup.flipster", function () { k = 0 })), s.enableMousewheel && m.length > 1 && v.on("mousewheel.flipster", function (e) { x = window.setTimeout(t, 500), (++k % 4 == 0 || 1 === k) && (window.clearTimeout(x), h(e.originalEvent.wheelDelta / 120 > 0 ? "left" : "right"), e.preventDefault()) }), s.enableTouch && m.length > 1 && (v.on("touchstart.flipster", function (e) { T = e.originalEvent.targetTouches[0].screenX }), v.on("touchmove.flipster", function (e) { e.preventDefault(); var t = e.originalEvent.targetTouches[0].screenX, i = t - T; i > m[0].clientWidth / 1.75 ? (h("left"), T = t) : i < m[0].clientWidth / 1.75 * -1 && (h("right"), T = t) }), v.on("touchend.flipster", function () { T = 0 })) }() }) } }(jQuery);
